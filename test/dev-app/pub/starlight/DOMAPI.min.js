!function(starlight){function jsToLua(obj){var t,mt;return mt=new T({__index:function(t,key){var property=obj[key],i,children,child;if("function"==typeof property||property&&property.prototype&&"function"==typeof property.prototype.constructor){var f=function(){var t=convertArguments(arguments,luaToJS),r=property.apply(t.shift(),t);return"object"==typeof r?jsToLua(r):[r]};if(Object.getOwnPropertyNames)for(children=Object.getOwnPropertyNames(property),i=0;child=children[i];i++)"caller"!=child&&"callee"!=child&&"arguments"!=child&&(f[child]=property[child]);return f["new"]=function(){var args=convertArguments(arguments,luaToJS),argStr,obj,i,l;for(argStr=(l=args.length)?"args[0]":"",i=1;l>i;i++)argStr+=",args["+i+"]";return obj=eval("new property("+argStr+")"),jsToLua(obj)},f}return"object"==typeof property?jsToLua(property):property},__newindex:function(t,r,e){obj[r]=luaToJS(e)}}),mt.source=obj,t=new T,t.metatable=mt,t}function luaToJS(t){var r;if(t instanceof Function)return function(){return jsToLua(t.apply(void 0,convertArguments(arguments,jsToLua)))};if(t instanceof T){if((r=t.metatable)&&r.source)return r.source;var e,n=getn(t)>0,o=n?[]:{},i=t.numValues,a=t.strValues,u=i.length;for(e=1;u>e;e++)o[e-1]=i[e]instanceof T?luaToJS(i[e]):i[e];for(e in a)a.hasOwnProperty(e)&&(o[e]=t[e]instanceof T?luaToJS(t[e]):t[e]);return o}return t}function convertArguments(t,r){var e,n,o=[];for(e=0,n=t.length;n>e;e++)o.push(r(t[e]));return o}var T=starlight.runtime.T,_G=starlight.runtime.globalScope,getn=_G.get("table").get("getn"),win=jsToLua(window);_G.set("window",win),win.set("extract",function(){var t=Object.getOwnPropertyNames&&Object.getOwnPropertyNames(win);for(var r in t||win)t&&(r=t[r]),"print"!==r&&"window"!==r&&null!==win[r]&&_G.set(r,win.get(r))})}(window.starlight);